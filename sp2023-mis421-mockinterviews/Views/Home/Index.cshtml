@using sp2023_mis421_mockinterviews.Models.ViewModels
@using sp2023_mis421_mockinterviews.Data.Constants
@using sp2023_mis421_mockinterviews.Models.UserDb;
@using Microsoft.AspNetCore.Identity
@model IndexViewModel
@inject UserManager<ApplicationUser> UserManager

@{
    ViewBag.Title = "Welcome to the Mock Interviews App";
}

<div id="disruption-banner" style="
    text-align: center; 
    display: @Model.DisruptionBanner; 
    justify-content: center;"> 
    <!--This should be displayed based on globalconfigvars-->
    <p style="
        background-color: rgb(158, 27, 50, 0.8); 
        font-weight: 400;
        border-radius: 10px;
        color:white; 
        font-size: 30px; 
        padding: 2rem; 
        width:75%; 
        margin: auto; 
        margin-bottom: 4rem;
        box-shadow: 0 10px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19) !important;">
    
        We are currently experiencing sitewide disruption of services, which will be resolved speedily. We apologize for the inconvenience.
    </p>
</div>

@if (User.Identity.IsAuthenticated)
{
    <h1>Hello, @UserManager.GetUserAsync(User).Result.FirstName</h1>
    <p style="
        font-size: 20px; 
        text-align: center; 
        border-bottom: 2px solid black">
        Your bookings are shown below.
    </p>
    <br />
    <div id="zoom-link" style="text-align:center; display:@Model.ZoomLinkVisible;"> <!--This should be displayed based on globalconfigvars -->
        <p style="font-size:20px; text-align:center;">
            If you have signed up for a virtual interview, please click the button below when it is time for your interview to start.
        </p>
        <div style="text-align:center;">
            <a class="btn btn-primary ms-2 ms-lg-3" title="Join Zoom Meeting" href=@Model.ZoomLink target="_blank">Join Zoom Meeting</a>
        </div> <!--This link should be changed based on globalconfigvars-->
        <br>
        <p style="font-size:20px; text-align:center; border-bottom:2px solid black">

        </p>
    </div>
}
else
{
    <div class="index-image-container" style="
        position: relative; 
        text-align: center; 
        height: 100vh; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        border-radius: 10px;">

        
        <!-- Overlay content container -->
        <div style="
            position: absolute; 
            top: 5%;
            text-align: center; 
            background-color: rgba(0, 0, 0, 0.5); 
            padding: 20px 30px; 
            margin: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 16px 0 rgba(0,0,0,0.3), 0 6px 20px 0 rgba(0,0,0,0.19) !important;">
            
            <!-- Title -->
            <h2 style="
                font-size: 28px; 
                color: white; 
                margin: 1rem; 
                text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);">
                @ViewBag.Title
            </h2>

            <!-- Divider line -->
            <hr style="
                border: none; 
                border-top: 1px solid rgba(255, 255, 255, 0.6); 
                margin: auto; 
                width: 50%;">
            
            <!-- Caption -->
            <p style="
                font-size: 20px; 
                color: white; 
                margin: 1rem">
                The UA MIS Program's official platform for managing mock interviews
            </p>
        </div>

        <!-- Background image -->
        <img src="~/images/02_7.jpg" 
            alt="Hewson Hall in the spring" 
            style="
                width: 100%; 
                height: 100%; 
                object-fit: cover; 
                position: absolute; 
                top: 0; 
                left: 0; 
                z-index: -1;
                border-radius: 10px;
                box-shadow: 0 10px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19) !important;">
    </div>
}

<div>
    @if (User.Identity.IsAuthenticated && User.IsInRole(RolesConstants.StudentRole))
    {
        @await Html.PartialAsync("_InterviewEventsPartial", Model.StudentScheduledInterviews)
        @await Html.PartialAsync("_VolunteerEventsHomePartial", Model.TimeRangeViewModels)
    }

    @if (User.Identity.IsAuthenticated && User.IsInRole(RolesConstants.InterviewerRole))
    {
        @await Html.PartialAsync("_SignupInterviewerTimeslotsPartial", Model)
    }
</div>